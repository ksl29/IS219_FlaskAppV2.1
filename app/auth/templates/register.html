{% extends "base.html" %}
{% block content %}
    {% from 'bootstrap5/form.html' import render_form, render_field, render_form_row %}

    <div class="row">
        <div class="col-7">
            <h2>Register</h2>
            {{ render_form(form) }}
        </div>
        <div id="message" class="col-5">
            <div id="lower-case" class="invalid">
                Password has a lower case letter
            </div>
            <div id="upper-case" class="invalid">
                Password has an upper case letter
            </div>
            <div id="number" class="invalid">
                Password contains a number
            </div>
            <div id="min-length" class="invalid">
                Password is longer than 6 characters
            </div>
                <div class="progress">
                    <div id="p-bar" class="progress-bar" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>

        </div>
    </div>
    <style>
        #message {
            display:none;
        }
        .invalid {
            color: red;
        }

        .valid {
            color: green;
        }
    </style>


    <script>
        var passwordField = document.getElementById("password");
        var lowerCase = document.getElementById("lower-case");
        var upperCase = document.getElementById("upper-case");
        var number = document.getElementById("number");
        var pwMinLength = document.getElementById("minLength");
        var passwordMinLength =6;
        var hasLowerCase = 0;
        var hasUpperCase = 0
        var hasNumber = 0

        passwordField.onfocus = function () {
            var message = document.getElementById("message");
            message.style.display = "block";
            message.style.border = "1px solid";
        }


        console.log(passwordField.value)

        passwordField.onkeyup = function () {
            var progress_bar = document.getElementById("p-bar");
            // Validate lowercase letters
            let lowerCaseLetters = /[a-z]/g;
            let upperCaseLetters = /[A-Z]/g;
            let numbers = /[0-9]/;
            let counter=0;


            if (passwordField.value.match(lowerCaseLetters)) {
                hasLowerCase=1;

            }
            else{
                hasLowerCase=0;
            }
            if(hasLowerCase==1){
                counter++;
            }

            if (passwordField.value.match(upperCaseLetters)) {
                hasUpperCase=1;
            }else{
                hasUpperCase=0;
            }
            if(hasUpperCase==1){
                counter++;
            }

            if (passwordField.value.match(numbers)) {
                hasNumber=1;
            }else{
                hasNumber=0;
            }
            if(hasNumber==1){
                counter++;
            }

            if (passwordField.value.length>=passwordMinLength) {
                counter++;
            }

            console.log("counter?",counter)

            if (counter==1){
                progress_bar.style.width="25%";
            }else if (counter==2){
                 progress_bar.style.width="50%";
            }else if(counter==3){
                 progress_bar.style.width="75%";
            }else if(counter==4){
                 progress_bar.style.width="100%";

            }

        }




    </script>

{% endblock %}
